{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _parseFloat from \"@babel/runtime-corejs2/core-js/parse-float\";\nvar _jsxFileName = \"C:\\\\Users\\\\\\u674E\\u5A01\\\\Desktop\\\\my_works\\\\work_0627\\\\components\\\\ShopMap.js\";\nimport React from \"react\";\nimport { connect } from 'react-redux';\nimport { withScriptjs, withGoogleMap, GoogleMap, Marker } from \"react-google-maps\";\nimport ShopItem from './ShopItem';\nimport { selectMarker as _selectMarker } from '../actions';\nvar MyMapComponent = withScriptjs(withGoogleMap(function (props) {\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12\n    },\n    __self: this\n  }, React.createElement(GoogleMap, {\n    defaultZoom: 15,\n    defaultCenter: {\n      lat: 24.986913,\n      lng: 121.455948\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 13\n    },\n    __self: this\n  }, React.createElement(InfoBox, {\n    defaultPosition: new google.maps.LatLng(props.center.lat, props.center.lng),\n    options: {\n      closeBoxURL: \"\",\n      enableEventPropagation: true\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: {\n      backgroundColor: \"yellow\",\n      opacity: 0.75,\n      padding: \"12px\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: {\n      fontSize: \"16px\",\n      fontColor: \"#08233B\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26\n    },\n    __self: this\n  }, \"Hello, Taipei!\"))), React.createElement(Marker, {\n    position: {\n      lat: 22.6273,\n      lng: 120.3014\n    },\n    onClick: props.onToggleOpen,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  }, props.isOpen && React.createElement(InfoBox, {\n    onCloseClick: props.onToggleOpen,\n    options: {\n      closeBoxURL: \"\",\n      enableEventPropagation: true\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: {\n      backgroundColor: \"yellow\",\n      opacity: 0.75,\n      padding: \"12px\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: {\n      fontSize: \"16px\",\n      fontColor: \"#08233B\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, \"Hello, Kaohsiung!\")))), props.isMarkerShown && React.createElement(Marker, {\n    position: {\n      lat: 24.986913,\n      lng: 121.455948\n    },\n    onClick: props.onMarkerClick,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }), props.shops.map(function (shop, index) {\n    return React.createElement(Marker, {\n      key: index,\n      position: {\n        lat: _parseFloat(shop.lat),\n        lng: _parseFloat(shop.lon)\n      },\n      onClick: function onClick() {\n        return props.selectMarker(index);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    });\n  }), React.createElement(\"div\", {\n    className: \"position-absolute\",\n    style: {\n      top: '0',\n      zIndex: '0'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, props.shops[props.marker].name))));\n}));\n\nvar ShopMap =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(ShopMap, _React$PureComponent);\n\n  function ShopMap() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ShopMap);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ShopMap)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      isMarkerShown: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"delayedShowMarker\", function () {\n      setTimeout(function () {\n        _this.setState({\n          isMarkerShown: true\n        });\n      }, 3000);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleMarkerClick\", function (index) {\n      _this.setState({\n        isMarkerShown: false\n      });\n\n      _this.delayedShowMarker();\n    });\n\n    return _this;\n  }\n\n  _createClass(ShopMap, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.delayedShowMarker();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(MyMapComponent, {\n        isMarkerShown: this.state.isMarkerShown,\n        onMarkerClick: this.handleMarkerClick,\n        googleMapURL: \"https://maps.googleapis.com/maps/api/js?key=AIzaSyCt95qTXK2VBIGWxB8CiCWe8eBV475edOg&v=3.exp&libraries=geometry,drawing,places\",\n        loadingElement: React.createElement(\"div\", {\n          style: {\n            height: \"100%\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }),\n        containerElement: React.createElement(\"div\", {\n          style: {\n            height: \"400px\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        }),\n        mapElement: React.createElement(\"div\", {\n          style: {\n            height: \"100%\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }),\n        shops: this.props.shops,\n        marker: this.props.marker,\n        selectMarker: this.props.selectMarker,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return ShopMap;\n}(React.PureComponent);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    shops: state.data,\n    marker: state.data_now.index_marker\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    selectMarker: function selectMarker(index) {\n      return dispatch(_selectMarker(index));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ShopMap);","map":{"version":3,"sources":["C:\\Users\\李威\\Desktop\\my_works\\work_0627\\components\\ShopMap.js"],"names":["React","connect","withScriptjs","withGoogleMap","GoogleMap","Marker","ShopItem","selectMarker","MyMapComponent","props","lat","lng","google","maps","LatLng","center","closeBoxURL","enableEventPropagation","backgroundColor","opacity","padding","fontSize","fontColor","onToggleOpen","isOpen","isMarkerShown","onMarkerClick","shops","map","shop","index","lon","top","zIndex","marker","name","ShopMap","setTimeout","setState","delayedShowMarker","state","handleMarkerClick","height","PureComponent","mapStateToProps","data","data_now","index_marker","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from \"react\"\r\nimport { connect } from 'react-redux'\r\n\r\nimport { withScriptjs, withGoogleMap, GoogleMap, Marker } from \"react-google-maps\"\r\n\r\nimport ShopItem from './ShopItem'\r\n\r\nimport { selectMarker } from '../actions'\r\n\r\n\r\nconst MyMapComponent = withScriptjs(withGoogleMap((props) =>\r\n\t<div>\r\n\t\t<GoogleMap\r\n\t\t\tdefaultZoom={15}\r\n\t\t\tdefaultCenter={{ lat: 24.986913, lng: 121.455948 }}\r\n\t\t>\r\n\r\n\r\n\r\n\r\n\t\t\t<InfoBox\r\n\t\t\t\tdefaultPosition={new google.maps.LatLng(props.center.lat, props.center.lng)}\r\n\t\t\t\toptions={{ closeBoxURL: ``, enableEventPropagation: true }}\r\n\t\t\t\t>\r\n\t\t\t\t<div style={{ backgroundColor: `yellow`, opacity: 0.75, padding: `12px` }}>\r\n\t\t\t\t\t<div style={{ fontSize: `16px`, fontColor: `#08233B` }}>\r\n\t\t\t\t\tHello, Taipei!\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</InfoBox>\r\n\r\n\t\t\t<Marker\r\n\t\t\t\tposition={{ lat: 22.6273, lng: 120.3014 }}\r\n\t\t\t\tonClick={props.onToggleOpen}\r\n\t\t\t\t>\r\n\t\t\t\t{props.isOpen && <InfoBox\r\n\t\t\t\t\tonCloseClick={props.onToggleOpen}\r\n\t\t\t\t\toptions={{ closeBoxURL: ``, enableEventPropagation: true }}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div style={{ backgroundColor: `yellow`, opacity: 0.75, padding: `12px` }}>\r\n\t\t\t\t\t<div style={{ fontSize: `16px`, fontColor: `#08233B` }}>\r\n\t\t\t\t\t\tHello, Kaohsiung!\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</InfoBox>}\r\n\t\t\t</Marker>\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t{props.isMarkerShown && <Marker position={{ lat: 24.986913, lng: 121.455948 }} onClick={props.onMarkerClick} />}\r\n\t\t\t{props.shops.map((shop, index) => (\r\n\t\t\t\t<Marker key={index} position={{ lat: parseFloat(shop.lat), lng: parseFloat(shop.lon) }} onClick={() => props.selectMarker(index)} />\r\n\t\t\t))}\r\n\r\n\t\t\t<div className=\"position-absolute\" style={{top:'0', zIndex: '0'}}>\r\n\t\t\t\t<span>{props.shops[props.marker].name}</span>\r\n\t\t\t</div>\r\n\t\t</GoogleMap>\r\n\t\t\r\n\t</div>\r\n))\r\n\r\n\r\nclass ShopMap extends React.PureComponent {\r\n\tstate = {\r\n\t\tisMarkerShown: false,\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.delayedShowMarker()\r\n\t}\r\n\r\n\tdelayedShowMarker = () => {\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.setState({ isMarkerShown: true })\r\n\t\t}, 3000)\r\n\t}\r\n\r\n\thandleMarkerClick = (index) => {\r\n\t\tthis.setState({ isMarkerShown: false })\r\n\t\tthis.delayedShowMarker()\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<MyMapComponent\r\n\t\t\t\tisMarkerShown={this.state.isMarkerShown}\r\n\t\t\t\tonMarkerClick={this.handleMarkerClick}\r\n\t\t\t\tgoogleMapURL=\"https://maps.googleapis.com/maps/api/js?key=AIzaSyCt95qTXK2VBIGWxB8CiCWe8eBV475edOg&v=3.exp&libraries=geometry,drawing,places\"\r\n\t\t\t\tloadingElement={<div style={{ height: `100%` }} />}\r\n\t\t\t\tcontainerElement={<div style={{ height: `400px` }} />}\r\n\t\t\t\tmapElement={<div style={{ height: `100%` }} />}\r\n\t\t\t\t\r\n\t\t\t\tshops = {this.props.shops}\r\n\t\t\t\tmarker = {this.props.marker}\r\n\t\t\t\tselectMarker = {this.props.selectMarker}\r\n\t\t\t/>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nconst mapStateToProps = state => ({\r\n\tshops: state.data,\r\n\tmarker: state.data_now.index_marker\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n\tselectMarker: (index) => dispatch(selectMarker(index))\r\n})\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(ShopMap)"]},"metadata":{},"sourceType":"module"}