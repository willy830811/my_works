{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _parseFloat from \"@babel/runtime-corejs2/core-js/parse-float\";\nvar _jsxFileName = \"C:\\\\Users\\\\\\u674E\\u5A01\\\\Desktop\\\\my_works\\\\work_0627\\\\components\\\\ShopMap.js\";\nimport React from \"react\";\nimport { connect } from 'react-redux';\nimport { compose, withProps } from \"recompose\";\nimport { withScriptjs, withGoogleMap, GoogleMap, Marker } from \"react-google-maps\";\nimport ShopItem from './ShopItem';\nimport { selectMarker as _selectMarker } from '../actions';\nimport { selectShop as _selectShop } from '../actions';\nimport { nextPage as _nextPage } from '../actions';\nimport { toggleMode as _toggleMode } from '../actions';\nimport { withStateHandlers } from \"recompose\";\nimport { InfoBox } from \"react-google-maps/lib/components/addons/InfoBox\";\nvar MyMapComponent = compose(withProps({\n  googleMapURL: \"https://maps.googleapis.com/maps/api/js?key=AIzaSyCt95qTXK2VBIGWxB8CiCWe8eBV475edOg&v=3.exp&libraries=geometry,drawing,places\",\n  loadingElement: React.createElement(\"div\", {\n    style: {\n      height: '100%'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21\n    },\n    __self: this\n  }),\n  containerElement: React.createElement(\"div\", {\n    style: {\n      height: 'calc(100%)',\n      paddingTop: '48px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22\n    },\n    __self: this\n  }),\n  mapElement: React.createElement(\"div\", {\n    style: {\n      height: '100%'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23\n    },\n    __self: this\n  })\n}), withStateHandlers(function () {\n  return {\n    isOpen: false\n  };\n}, {\n  onToggleOpen: function onToggleOpen(_ref) {\n    var isOpen = _ref.isOpen;\n    return function () {\n      return {\n        isOpen: !isOpen\n      };\n    };\n  }\n}), withScriptjs, withGoogleMap)(function (props) {\n  return React.createElement(\"div\", {\n    style: {},\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"d-none d-md-block\",\n    style: {\n      position: 'absolute',\n      top: '48px',\n      width: '100%',\n      height: '84px',\n      paddingLeft: '15px',\n      zIndex: '1',\n      backgroundColor: '#f4f4f4'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"d-none d-md-block\",\n    style: {\n      position: 'absolute',\n      top: '70px',\n      width: '100%',\n      height: '49px',\n      paddingLeft: '15px',\n      zIndex: '1',\n      backgroundColor: '#f4f4f4'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    style: {\n      display: 'inline-block',\n      verticalAlign: 'middle',\n      lineHeight: '49px',\n      margin: '0',\n      float: 'left',\n      fontSize: '26px',\n      letterSpacing: '-0.63px',\n      color: '#232323'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, \"\\u512A\\u60E0\\u5217\\u8868\"), React.createElement(\"div\", {\n    style: {\n      display: 'inline-block',\n      verticalAlign: 'middle',\n      lineHeight: '49px',\n      float: 'right',\n      marginRight: '8px'\n    },\n    onClick: function onClick() {\n      return props.toggleMode();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: \"/static/right-on.svg\",\n    style: {\n      width: '90px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }))), React.createElement(GoogleMap, {\n    defaultZoom: 15,\n    defaultCenter: {\n      lat: 24.986913,\n      lng: 121.455948\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, props.shops.map(function (shop, index) {\n    return React.createElement(Marker, {\n      key: index,\n      position: {\n        lat: _parseFloat(shop.lat),\n        lng: _parseFloat(shop.lon)\n      },\n      onClick: function onClick() {\n        props.selectMarker(index);\n        props.onToggleOpen(index);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, props.isOpen && props.marker === index && React.createElement(InfoBox, {\n      onCloseClick: props.onToggleOpen,\n      options: {\n        closeBoxURL: \"\",\n        enableEventPropagation: true\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      className: \"list-unstyled\",\n      style: {},\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(ShopItem, {\n      onClick: function onClick() {\n        props.selectShop(props.marker);\n        props.nextPage();\n      },\n      content: props.shops[props.marker],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }))));\n  })), React.createElement(\"div\", {\n    className: \"d-block d-md-none position-fixed\",\n    style: {\n      right: '12px',\n      bottom: '9px'\n    },\n    onClick: function onClick() {\n      return props.toggleMode();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: \"/static/right-on.svg\",\n    style: {\n      width: '90px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  })));\n});\n\nvar ShopMap =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(ShopMap, _React$PureComponent);\n\n  function ShopMap() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ShopMap);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ShopMap)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      isMarkerShown: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"delayedShowMarker\", function () {\n      setTimeout(function () {\n        _this.setState({\n          isMarkerShown: true\n        });\n      }, 3000);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleMarkerClick\", function (index) {\n      _this.setState({\n        isMarkerShown: false\n      });\n\n      _this.delayedShowMarker();\n    });\n\n    return _this;\n  }\n\n  _createClass(ShopMap, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.delayedShowMarker();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(MyMapComponent, {\n        isMarkerShown: this.state.isMarkerShown,\n        onMarkerClick: this.handleMarkerClick,\n        shops: this.props.shops,\n        marker: this.props.marker,\n        selectMarker: this.props.selectMarker,\n        selectShop: this.props.selectShop,\n        nextPage: this.props.nextPage,\n        toggleMode: this.props.toggleMode,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return ShopMap;\n}(React.PureComponent);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    shops: state.data,\n    marker: state.data_now.index_marker\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    selectMarker: function selectMarker(index) {\n      return dispatch(_selectMarker(index));\n    },\n    selectShop: function selectShop(index) {\n      return dispatch(_selectShop(index));\n    },\n    nextPage: function nextPage() {\n      return dispatch(_nextPage());\n    },\n    toggleMode: function toggleMode() {\n      return dispatch(_toggleMode());\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ShopMap);","map":{"version":3,"sources":["C:\\Users\\李威\\Desktop\\my_works\\work_0627\\components\\ShopMap.js"],"names":["React","connect","compose","withProps","withScriptjs","withGoogleMap","GoogleMap","Marker","ShopItem","selectMarker","selectShop","nextPage","toggleMode","withStateHandlers","InfoBox","MyMapComponent","googleMapURL","loadingElement","height","containerElement","paddingTop","mapElement","isOpen","onToggleOpen","props","position","top","width","paddingLeft","zIndex","backgroundColor","display","verticalAlign","lineHeight","margin","float","fontSize","letterSpacing","color","marginRight","lat","lng","shops","map","shop","index","lon","marker","closeBoxURL","enableEventPropagation","right","bottom","ShopMap","isMarkerShown","setTimeout","setState","delayedShowMarker","state","handleMarkerClick","PureComponent","mapStateToProps","data","data_now","index_marker","mapDispatchToProps","dispatch"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AAEA,SAASC,OAAT,EAAkBC,SAAlB,QAAmC,WAAnC;AACA,SAASC,YAAT,EAAuBC,aAAvB,EAAsCC,SAAtC,EAAiDC,MAAjD,QAA+D,mBAA/D;AAEA,OAAOC,QAAP,MAAqB,YAArB;AAEA,SAASC,YAAY,IAAZA,aAAT,QAA6B,YAA7B;AACA,SAASC,UAAU,IAAVA,WAAT,QAA2B,YAA3B;AACA,SAASC,QAAQ,IAARA,SAAT,QAAyB,YAAzB;AACA,SAASC,UAAU,IAAVA,WAAT,QAA2B,YAA3B;AAEA,SAASC,iBAAT,QAAkC,WAAlC;AACA,SAASC,OAAT,QAAwB,iDAAxB;AAGA,IAAMC,cAAc,GAAGb,OAAO,CAC7BC,SAAS,CAAC;AACTa,EAAAA,YAAY,EAAE,+HADL;AAETC,EAAAA,cAAc,EAAE;AAAK,IAAA,KAAK,EAAE;AAAEC,MAAAA,MAAM,EAAE;AAAV,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFP;AAGTC,EAAAA,gBAAgB,EAAE;AAAK,IAAA,KAAK,EAAE;AAAED,MAAAA,MAAM,EAAE,YAAV;AAAwBE,MAAAA,UAAU,EAAE;AAApC,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHT;AAITC,EAAAA,UAAU,EAAE;AAAK,IAAA,KAAK,EAAE;AAAEH,MAAAA,MAAM,EAAE;AAAV,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJH,CAAD,CADoB,EAQ7BL,iBAAiB,CAAC;AAAA,SAAO;AACxBS,IAAAA,MAAM,EAAE;AADgB,GAAP;AAAA,CAAD,EAEb;AACHC,EAAAA,YAAY,EAAE;AAAA,QAAGD,MAAH,QAAGA,MAAH;AAAA,WAAgB;AAAA,aAAO;AACpCA,QAAAA,MAAM,EAAE,CAACA;AAD2B,OAAP;AAAA,KAAhB;AAAA;AADX,CAFa,CARY,EAgB7BlB,YAhB6B,EAiB7BC,aAjB6B,CAAP,CAkBpB,UAACmB,KAAD;AAAA,SACD;AAAK,IAAA,KAAK,EAAE,EAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACC;AAAK,IAAA,SAAS,EAAC,mBAAf;AAAmC,IAAA,KAAK,EAAE;AAACC,MAAAA,QAAQ,EAAE,UAAX;AAAuBC,MAAAA,GAAG,EAAE,MAA5B;AAAoCC,MAAAA,KAAK,EAAE,MAA3C;AAAmDT,MAAAA,MAAM,EAAE,MAA3D;AAAmEU,MAAAA,WAAW,EAAC,MAA/E;AAAuFC,MAAAA,MAAM,EAAE,GAA/F;AAAoGC,MAAAA,eAAe,EAAE;AAArH,KAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,EAGC;AAAK,IAAA,SAAS,EAAC,mBAAf;AAAmC,IAAA,KAAK,EAAE;AAACL,MAAAA,QAAQ,EAAE,UAAX;AAAuBC,MAAAA,GAAG,EAAE,MAA5B;AAAoCC,MAAAA,KAAK,EAAE,MAA3C;AAAmDT,MAAAA,MAAM,EAAE,MAA3D;AAAmEU,MAAAA,WAAW,EAAC,MAA/E;AAAuFC,MAAAA,MAAM,EAAE,GAA/F;AAAoGC,MAAAA,eAAe,EAAE;AAArH,KAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACC;AAAG,IAAA,KAAK,EAAE;AAACC,MAAAA,OAAO,EAAE,cAAV;AAA0BC,MAAAA,aAAa,EAAE,QAAzC;AAAmDC,MAAAA,UAAU,EAAE,MAA/D;AAAuEC,MAAAA,MAAM,EAAE,GAA/E;AAAoFC,MAAAA,KAAK,EAAE,MAA3F;AAAmGC,MAAAA,QAAQ,EAAE,MAA7G;AAAqHC,MAAAA,aAAa,EAAE,SAApI;AAA+IC,MAAAA,KAAK,EAAE;AAAtJ,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCADD,EAEC;AAAK,IAAA,KAAK,EAAE;AAACP,MAAAA,OAAO,EAAE,cAAV;AAA0BC,MAAAA,aAAa,EAAE,QAAzC;AAAmDC,MAAAA,UAAU,EAAE,MAA/D;AAAuEE,MAAAA,KAAK,EAAE,OAA9E;AAAuFI,MAAAA,WAAW,EAAE;AAApG,KAAZ;AAAwH,IAAA,OAAO,EAAE;AAAA,aAAMf,KAAK,CAACZ,UAAN,EAAN;AAAA,KAAjI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACC;AAAK,IAAA,GAAG,EAAC,sBAAT;AAAgC,IAAA,KAAK,EAAE;AAACe,MAAAA,KAAK,EAAE;AAAR,KAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CAFD,CAHD,EAaC,oBAAC,SAAD;AACC,IAAA,WAAW,EAAE,EADd;AAEC,IAAA,aAAa,EAAE;AAAEa,MAAAA,GAAG,EAAE,SAAP;AAAkBC,MAAAA,GAAG,EAAE;AAAvB,KAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKEjB,KAAK,CAACkB,KAAN,CAAYC,GAAZ,CAAgB,UAACC,IAAD,EAAOC,KAAP;AAAA,WAChB,oBAAC,MAAD;AACC,MAAA,GAAG,EAAEA,KADN;AAEC,MAAA,QAAQ,EAAE;AAAEL,QAAAA,GAAG,EAAE,YAAWI,IAAI,CAACJ,GAAhB,CAAP;AAA6BC,QAAAA,GAAG,EAAE,YAAWG,IAAI,CAACE,GAAhB;AAAlC,OAFX;AAGC,MAAA,OAAO,EAAE,mBAAM;AAACtB,QAAAA,KAAK,CAACf,YAAN,CAAmBoC,KAAnB;AAA2BrB,QAAAA,KAAK,CAACD,YAAN,CAAmBsB,KAAnB;AAA0B,OAHtE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAKGrB,KAAK,CAACF,MAAN,IAAgBE,KAAK,CAACuB,MAAN,KAAiBF,KAAlC,IAA4C,oBAAC,OAAD;AAC5C,MAAA,YAAY,EAAErB,KAAK,CAACD,YADwB;AAE5C,MAAA,OAAO,EAAE;AAAEyB,QAAAA,WAAW,IAAb;AAAmBC,QAAAA,sBAAsB,EAAE;AAA3C,OAFmC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAI5C;AAAI,MAAA,SAAS,EAAC,eAAd;AAA8B,MAAA,KAAK,EAAE,EAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC,oBAAC,QAAD;AAAU,MAAA,OAAO,EAAE,mBAAM;AAACzB,QAAAA,KAAK,CAACd,UAAN,CAAiBc,KAAK,CAACuB,MAAvB;AAAgCvB,QAAAA,KAAK,CAACb,QAAN;AAAkB,OAA5E;AAA8E,MAAA,OAAO,EAAEa,KAAK,CAACkB,KAAN,CAAYlB,KAAK,CAACuB,MAAlB,CAAvF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,CAJ4C,CAL9C,CADgB;AAAA,GAAhB,CALF,CAbD,EAoCC;AAAK,IAAA,SAAS,EAAC,kCAAf;AAAkD,IAAA,KAAK,EAAE;AAACG,MAAAA,KAAK,EAAE,MAAR;AAAgBC,MAAAA,MAAM,EAAE;AAAxB,KAAzD;AAAyF,IAAA,OAAO,EAAE;AAAA,aAAM3B,KAAK,CAACZ,UAAN,EAAN;AAAA,KAAlG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA4H;AAAK,IAAA,GAAG,EAAC,sBAAT;AAAgC,IAAA,KAAK,EAAE;AAACe,MAAAA,KAAK,EAAE;AAAR,KAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAA5H,CApCD,CADC;AAAA,CAlBoB,CAAvB;;IA6DMyB,O;;;;;;;;;;;;;;;;;;4DACG;AACPC,MAAAA,aAAa,EAAE;AADR,K;;wEAQY,YAAM;AACzBC,MAAAA,UAAU,CAAC,YAAM;AAChB,cAAKC,QAAL,CAAc;AAAEF,UAAAA,aAAa,EAAE;AAAjB,SAAd;AACA,OAFS,EAEP,IAFO,CAAV;AAGA,K;;wEAEmB,UAACR,KAAD,EAAW;AAC9B,YAAKU,QAAL,CAAc;AAAEF,QAAAA,aAAa,EAAE;AAAjB,OAAd;;AACA,YAAKG,iBAAL;AACA,K;;;;;;;wCAbmB;AACnB,WAAKA,iBAAL;AACA;;;6BAaQ;AAIR,aAEE,oBAAC,cAAD;AACC,QAAA,aAAa,EAAE,KAAKC,KAAL,CAAWJ,aAD3B;AAEC,QAAA,aAAa,EAAE,KAAKK,iBAFrB;AAIC,QAAA,KAAK,EAAI,KAAKlC,KAAL,CAAWkB,KAJrB;AAKC,QAAA,MAAM,EAAI,KAAKlB,KAAL,CAAWuB,MALtB;AAMC,QAAA,YAAY,EAAI,KAAKvB,KAAL,CAAWf,YAN5B;AAOC,QAAA,UAAU,EAAI,KAAKe,KAAL,CAAWd,UAP1B;AAQC,QAAA,QAAQ,EAAI,KAAKc,KAAL,CAAWb,QARxB;AASC,QAAA,UAAU,EAAI,KAAKa,KAAL,CAAWZ,UAT1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF;AAeA;;;;EAvCoBZ,KAAK,CAAC2D,a;;AA2C5B,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAAH,KAAK;AAAA,SAAK;AACjCf,IAAAA,KAAK,EAAEe,KAAK,CAACI,IADoB;AAEjCd,IAAAA,MAAM,EAAEU,KAAK,CAACK,QAAN,CAAeC;AAFU,GAAL;AAAA,CAA7B;;AAMA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAC,QAAQ;AAAA,SAAK;AAEvCxD,IAAAA,YAAY,EAAE,sBAAAoC,KAAK;AAAA,aAAIoB,QAAQ,CAACxD,aAAY,CAACoC,KAAD,CAAb,CAAZ;AAAA,KAFoB;AAGvCnC,IAAAA,UAAU,EAAE,oBAAAmC,KAAK;AAAA,aAAIoB,QAAQ,CAACvD,WAAU,CAACmC,KAAD,CAAX,CAAZ;AAAA,KAHsB;AAIvClC,IAAAA,QAAQ,EAAE;AAAA,aAAMsD,QAAQ,CAACtD,SAAQ,EAAT,CAAd;AAAA,KAJ6B;AAKvCC,IAAAA,UAAU,EAAE;AAAA,aAAMqD,QAAQ,CAACrD,WAAU,EAAX,CAAd;AAAA;AAL2B,GAAL;AAAA,CAAnC;;AAQA,eAAeX,OAAO,CACrB2D,eADqB,EAErBI,kBAFqB,CAAP,CAGbZ,OAHa,CAAf","sourcesContent":["import React from \"react\"\r\nimport { connect } from 'react-redux'\r\n\r\nimport { compose, withProps } from \"recompose\"\r\nimport { withScriptjs, withGoogleMap, GoogleMap, Marker } from \"react-google-maps\"\r\n\r\nimport ShopItem from './ShopItem'\r\n\r\nimport { selectMarker } from '../actions'\r\nimport { selectShop } from '../actions'\r\nimport { nextPage } from '../actions'\r\nimport { toggleMode } from '../actions'\r\n\r\nimport { withStateHandlers } from \"recompose\"\r\nimport { InfoBox } from \"react-google-maps/lib/components/addons/InfoBox\"\r\n\r\n\r\nconst MyMapComponent = compose(\r\n\twithProps({\r\n\t\tgoogleMapURL: \"https://maps.googleapis.com/maps/api/js?key=AIzaSyCt95qTXK2VBIGWxB8CiCWe8eBV475edOg&v=3.exp&libraries=geometry,drawing,places\",\r\n\t\tloadingElement: <div style={{ height: '100%' }} />,\r\n\t\tcontainerElement: <div style={{ height: 'calc(100%)', paddingTop: '48px' }} />,\r\n\t\tmapElement: <div style={{ height: '100%' }} />,\r\n\t}),\r\n\r\n\twithStateHandlers(() => ({\r\n\t\tisOpen: false,\r\n\t}), {\r\n\t\tonToggleOpen: ({ isOpen }) => () => ({\r\n\t\t\tisOpen: !isOpen,\r\n\t\t})\r\n\t}),\r\n\r\n\twithScriptjs,\r\n\twithGoogleMap\r\n\t)((props) =>\r\n\t\t<div style={{}}>\r\n\t\t\t<div className=\"d-none d-md-block\" style={{position: 'absolute', top: '48px', width: '100%', height: '84px', paddingLeft:'15px', zIndex: '1', backgroundColor: '#f4f4f4'}}></div>\r\n\r\n\t\t\t<div className=\"d-none d-md-block\" style={{position: 'absolute', top: '70px', width: '100%', height: '49px', paddingLeft:'15px', zIndex: '1', backgroundColor: '#f4f4f4'}}>\r\n\t\t\t\t<p style={{display: 'inline-block', verticalAlign: 'middle', lineHeight: '49px', margin: '0', float: 'left', fontSize: '26px', letterSpacing: '-0.63px', color: '#232323'}}>優惠列表</p>\r\n\t\t\t\t<div style={{display: 'inline-block', verticalAlign: 'middle', lineHeight: '49px', float: 'right', marginRight: '8px'}} onClick={() => props.toggleMode()}>\r\n\t\t\t\t\t<img src=\"/static/right-on.svg\" style={{width: '90px'}} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t\r\n\r\n\r\n\r\n\t\t\t<GoogleMap\r\n\t\t\t\tdefaultZoom={15}\r\n\t\t\t\tdefaultCenter={{ lat: 24.986913, lng: 121.455948 }}\r\n\t\t\t>\r\n\r\n\t\t\t\t{props.shops.map((shop, index) => (\r\n\t\t\t\t\t<Marker\r\n\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\tposition={{ lat: parseFloat(shop.lat), lng: parseFloat(shop.lon) }}\r\n\t\t\t\t\t\tonClick={() => {props.selectMarker(index); props.onToggleOpen(index)}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{(props.isOpen && props.marker === index) && <InfoBox\r\n\t\t\t\t\t\t\tonCloseClick={props.onToggleOpen}\r\n\t\t\t\t\t\t\toptions={{ closeBoxURL: ``, enableEventPropagation: true }}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ul className=\"list-unstyled\" style={{}}>\r\n\t\t\t\t\t\t\t\t<ShopItem onClick={() => {props.selectShop(props.marker); props.nextPage();}} content={props.shops[props.marker]} />\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</InfoBox>}\r\n\t\t\t\t\t</Marker>\r\n\t\t\t\t))}\r\n\t\t\t</GoogleMap>\r\n\t\t\t\t\t\t\t\r\n\t\t\t<div className=\"d-block d-md-none position-fixed\" style={{right: '12px', bottom: '9px'}} onClick={() => props.toggleMode()}><img src=\"/static/right-on.svg\" style={{width: '90px'}} /></div>\r\n\t\t</div>\r\n\t)\r\n\r\n\r\n\r\nclass ShopMap extends React.PureComponent {\r\n\tstate = {\r\n\t\tisMarkerShown: false,\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.delayedShowMarker()\r\n\t}\r\n\r\n\tdelayedShowMarker = () => {\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.setState({ isMarkerShown: true })\r\n\t\t}, 3000)\r\n\t}\r\n\r\n\thandleMarkerClick = (index) => {\r\n\t\tthis.setState({ isMarkerShown: false })\r\n\t\tthis.delayedShowMarker()\r\n\t}\r\n\r\n\trender() {\r\n\r\n\r\n\r\n\t\treturn (\r\n\r\n\t\t\t\t<MyMapComponent\r\n\t\t\t\t\tisMarkerShown={this.state.isMarkerShown}\r\n\t\t\t\t\tonMarkerClick={this.handleMarkerClick}\r\n\t\t\t\t\t\r\n\t\t\t\t\tshops = {this.props.shops}\r\n\t\t\t\t\tmarker = {this.props.marker}\r\n\t\t\t\t\tselectMarker = {this.props.selectMarker}\r\n\t\t\t\t\tselectShop = {this.props.selectShop}\r\n\t\t\t\t\tnextPage = {this.props.nextPage}\r\n\t\t\t\t\ttoggleMode = {this.props.toggleMode}\r\n\t\t\t\t/>\r\n\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nconst mapStateToProps = state => ({\r\n\tshops: state.data,\r\n\tmarker: state.data_now.index_marker,\r\n\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n\r\n\tselectMarker: index => dispatch(selectMarker(index)),\r\n\tselectShop: index => dispatch(selectShop(index)),\r\n\tnextPage: () => dispatch(nextPage()),\r\n\ttoggleMode: () => dispatch(toggleMode())\r\n})\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps\r\n)(ShopMap)"]},"metadata":{},"sourceType":"module"}